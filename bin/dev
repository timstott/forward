#!/bin/sh

# Boot local dev server

set -euo pipefail

version=$(git describe --exact-match @ 2>/dev/null || git rev-parse --short @)

export DESTINATION_EMAIL="${DESTINATION_EMAIL:=hello@example.com}"
export SOURCE_EMAIL="${SOURCE_EMAIL:=no-reply@example.com}"

export GIN_MODE=debug

CGO_ENABLED=0 \
  go run \
  -ldflags "-X github.com/timstott/forward/app.version=$version" \
  local-server/main.go
